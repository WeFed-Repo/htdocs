var App;(function(n){(function(n){var t=function(){function n(n,t,i){function u(n){var t=this;t.CodFisc=ko.observable(n)}typeof n=="undefined"&&(n=null);this.DescrizioneRiconcilazioneBase=ko.observable(n);this.DetrazioneOrdinanti=ko.observableArray(null);this.CurrentTipologiaOrdinante=ko.observable("CO");this.TipologieDetrazione=ko.observableArray(i);this.TipologiaDetrazioneObj=ko.observable(null);this.TipologiaDetrazione=ko.observable("");this.DescrizioneRiconcilazioneUtente=ko.observable("");this.CodiceSoggettoBeneficiario=ko.observable(t);var r=this;r.RefreshDatiRiconciliazione=function(){var n,e,t,i;if(r.DescrizioneRiconcilazioneBase()!==null&&(n=r.DescrizioneRiconcilazioneBase().split("\n"),n.length>=4&&n[0].indexOf("BONIFISC")!==-1)){var f=n[0].substring(14).match(/^([a-zA-Z0-9]+)\/(.*)$/),o=f[2];r.TipologiaDetrazione(f[1]);e=n[1].substring(14);t=n[2].substring(14);r.CurrentTipologiaOrdinante(t=="CO"?"CO":t=="PG"?"PG":"PF");r.DetrazioneOrdinanti.removeAll();i=0;ko.utils.arrayForEach(n,function(n){i>2&&n!=null&&n!=""&&r.DetrazioneOrdinanti.push(new u(n.substring(14)));i++});r.DescrizioneRiconcilazioneUtente(e)}};r.RefreshDatiRiconciliazione();r.TipologiaDetrazione.subscribe(function(){r.TipologiaDetrazioneObj(ko.utils.arrayFirst(r.TipologieDetrazione(),function(n){return n.Codice===r.TipologiaDetrazione()}))});r.DescrizioneRiconcilazione=ko.computed(function(){var u="";if(r.TipologiaDetrazione()!=null&&r.TipologiaDetrazione()!=""&&r.TipologieDetrazione()!=null&&r.TipologieDetrazione().length>0){r.TipologiaDetrazioneObj()==null&&r.TipologiaDetrazioneObj(ko.utils.arrayFirst(r.TipologieDetrazione(),function(n){return n.Codice===r.TipologiaDetrazione()}));var f=r.TipologiaDetrazioneObj(),n="/",t=n+n+"BONIFISC ",i="\n",o=t+"01"+n+f.Codice+n+f.Causale+i,s=t+"02"+n+r.DescrizioneRiconcilazioneUtente()+i,h=t+"03"+n+(r.CurrentTipologiaOrdinante()=="CO"?"CO":r.CurrentTipologiaOrdinante()=="PG"?"PG":"PF"),e="";$.each(r.DetrazioneOrdinanti(),function(r,u){e+=i+t+("0"+(r+4)).slice(-2)+n+u.CodFisc()});u=o+s+h+e}return u});r.DescrizioneRiconcilazioneFissa=ko.computed(function(){var n="";return r.TipologiaDetrazione()!=null&&r.TipologiaDetrazione()!=""&&r.TipologieDetrazione()!=null&&r.TipologieDetrazione().length>0&&(n=r.TipologiaDetrazioneObj().Causale,r.CodiceSoggettoBeneficiario()&&(n+=" CFDES: "+r.CodiceSoggettoBeneficiario()),r.DetrazioneOrdinanti().length>0&&r.DetrazioneOrdinanti()[0]&&r.DetrazioneOrdinanti()[0].CodFisc()&&(n+=" CFORD: "+r.DetrazioneOrdinanti()[0].CodFisc())),n});r.Causale=ko.computed(function(){return r.DescrizioneRiconcilazioneUtente()+" "+r.DescrizioneRiconcilazioneFissa()});r.DescrizioneRiconcilazioneUtente.subscribe(function(){r.DescrizioneRiconcilazioneUtente(r.DescrizioneRiconcilazioneUtente().replace(/(\r\n|\n|\r)/g,""))});r.AddOrdinanteVuoto=function(){r.DetrazioneOrdinanti().length<16&&r.DetrazioneOrdinanti.push(new u(""))};r.CancelOrdinante=function(n){r.DetrazioneOrdinanti.remove(n)};r.CambiaPrimoOrdinante=function(n){r.DetrazioneOrdinanti.shift();r.DetrazioneOrdinanti.unshift(new u(n))};r.DetrazioneOrdinanti().length==0&&(r.AddOrdinanteVuoto(),(r.CurrentTipologiaOrdinante()=="CO"||r.CurrentTipologiaOrdinante()=="PG")&&r.AddOrdinanteVuoto())}return n}();n.DatiPerDetrazioneSctBo=t})(n.Sct||(n.Sct={}));var t=n.Sct})(App||(App={})),function(n){(function(t){var i=function(){function i(i){typeof i=="undefined"&&(i=null);n.Common.BaseDisposizioneBo.call(this,i);this.Debitore=new n.Common.SoggettoBo(null);this.Beneficiario=new n.Common.SoggettoBo(null);this.Creditore=new n.Common.SoggettoBo(null);this.CreditoreOBeneficiario=new n.Common.SoggettoBo(null);this.DescrizioneRiconcilazione=ko.observable(null);this.CodiceUnivoco=ko.observable(null);this.CausaleIso=ko.observable(null);this.CausaleLibera=ko.observable(null);this.FinalitaPagamento=new t.FinalitaPagamentoBo(null);this.IsUrgP=ko.observable(null);this.Esito=new t.EsitoAlBeneficiarioBo(null);this.Cvs=ko.observableArray(null);this.Identifier.ClasseServizio()==n.Common.ClassiServizio.BONIFICO_FISCALE_SCT&&(this.DatiPerDetrazione=new t.DatiPerDetrazioneSctBo(null,null,null));this.HasEsitoAlBeneficiario=ko.observable(!1);this.IdentifierAzienda=new n.Common.IdentifierBo(null);var r=this;i!==null&&(r.Debitore=new n.Common.SoggettoBo(i.Debitore),r.Beneficiario=new n.Common.SoggettoBo(i.Beneficiario),r.Creditore=new n.Common.SoggettoBo(i.Creditore),r.CreditoreOBeneficiario=i.Creditore!=null&&i.Creditore.Denominazione!=null?new n.Common.SoggettoBo(i.Creditore):new n.Common.SoggettoBo(i.Beneficiario),r.DescrizioneRiconcilazione(i.DescrizioneRiconcilazione),r.CodiceUnivoco(i.CodiceUnivoco),r.CausaleIso(i.CausaleIso),r.CausaleLibera(i.CausaleLibera),r.FinalitaPagamento=new t.FinalitaPagamentoBo(i.FinalitaPagamento),r.IsUrgP(i.IsUrgP),r.Esito=new t.EsitoAlBeneficiarioBo(i.Esito),i.Cvs!=null&&ko.utils.arrayForEach(i.Cvs,function(t){r.Cvs.push(new n.Common.CvsBo(t))}),r.Identifier.ClasseServizio()==n.Common.ClassiServizio.BONIFICO_FISCALE_SCT&&(r.DatiPerDetrazione=new t.DatiPerDetrazioneSctBo(r.DescrizioneRiconcilazione(),r.Beneficiario.DatiAggiuntivi.CodiceSoggetto(),null)),r.HasEsitoAlBeneficiario(i.Esito!=null),r.IdentifierAzienda=new n.Common.IdentifierBo(i.IdentifierAzienda))}return i}();t.DisposizioneSctBo=i})(n.Sct||(n.Sct={}));var t=n.Sct}(App||(App={})),function(n){(function(t){var i=function(){function t(t){typeof t=="undefined"&&(t=null);n.Common.BaseDistintaBo.call(this,t);this.IdDivisa=ko.observable(null);this.EsitoOrdinante=ko.observable(null);this.AddebitoCumulativo=ko.observable(null);this.DataEsecuzione=ko.observable(null);this.IsUrgP=ko.observable(null);this.IsInstant=ko.observable(null);this.Disposizioni=ko.observableArray(null);this.TipoConto=new n.Sct.TipoContoBo(null);this.Commission=new n.Sct.CommissionBo(null);this.Beneficiario=ko.observable(null);var i=this;t!==null&&(i.IdDivisa(t.IdDivisa),i.EsitoOrdinante(t.EsitoOrdinante),i.AddebitoCumulativo(t.AddebitoCumulativo),i.IsUrgP(t.IsUrgP),i.IsInstant(t.IsInstant),t.DataEsecuzione!==null&&t.DataEsecuzione!=="undefined"&&i.DataEsecuzione(new Date(moment(t.DataEsecuzione))),t.Disposizioni!=null&&ko.utils.arrayForEach(t.Disposizioni,function(t){i.Disposizioni.push(new n.Sct.DisposizioneSctBo(t))}),i.TipoConto=new n.Sct.TipoContoBo(t.TipoConto),i.Commission=new n.Sct.CommissionBo(t.Commission),i.Beneficiario(t.Beneficiario))}return t}();t.DistintaSctBo=i})(n.Sct||(n.Sct={}));var t=n.Sct}(App||(App={})),function(n){(function(t){var i=function(){function t(t){typeof t=="undefined"&&(t=null);this.NomeSoggetto=ko.observable(null);this.ModalitaEsito=ko.observable(null);this.Cuc=ko.observable(null);this.Identifier=new n.Common.IdentifierBo(null);this.RagioneSociale=ko.observable(null);this.Debitore=ko.observable(null);this.DataCaricamento=ko.observable(null);this.DataEsecuzione=ko.observable(null);this.Importo=ko.observable(null);this.CodDivisa=ko.observable(null);this.CodUnivoco=ko.observable(null);this.CodCUC=ko.observable(null);this.CodRifOperazione=ko.observable(null);this.CausaleProp=ko.observable(null);this.CausaleISO=ko.observable(null);this.DataValutaBeneficiario=ko.observable(null);this.DataAccettazione=ko.observable(null);this.InfAgg=ko.observable(null);this.InfAggRic=ko.observable(null);this.InfRic=ko.observable(null);this.DebitoreEff=ko.observable(null);this.BancaDebitore=ko.observable(null);this.AbiDebitore=ko.observable(null);this.BancaCreditore=ko.observable(null);this.AbiCreditore=ko.observable(null);this.TitolareAcc=ko.observable(null);this.ContoCreditore=ko.observable(null);this.Beneficiario=ko.observable(null);this.CreditoreEff=ko.observable(null);this.MetodoPagamento=ko.observable(null);var i=this;t!==null&&(i.NomeSoggetto(t.NomeSoggetto),i.ModalitaEsito(t.ModalitaEsito),i.Cuc(t.Cuc),i.Identifier=new n.Common.IdentifierBo(t.Identifier),i.RagioneSociale(t.RagioneSociale),i.Debitore(t.Debitore),t.DataCaricamento!==null&&t.DataCaricamento!=="undefined"&&i.DataCaricamento(new Date(moment(t.DataCaricamento))),t.DataEsecuzione!==null&&t.DataEsecuzione!=="undefined"&&i.DataEsecuzione(new Date(moment(t.DataEsecuzione))),i.Importo(t.Importo),i.CodDivisa(t.CodDivisa),i.CodUnivoco(t.CodUnivoco),i.CodCUC(t.CodCUC),i.CodRifOperazione(t.CodRifOperazione),i.CausaleProp(t.CausaleProp),i.CausaleISO(t.CausaleISO),t.DataValutaBeneficiario!==null&&t.DataValutaBeneficiario!=="undefined"&&i.DataValutaBeneficiario(new Date(moment(t.DataValutaBeneficiario))),t.DataAccettazione!==null&&t.DataAccettazione!=="undefined"&&i.DataAccettazione(new Date(moment(t.DataAccettazione))),i.InfAgg(t.InfAgg),i.InfAggRic(t.InfAggRic),i.InfRic(t.InfRic),i.DebitoreEff(t.DebitoreEff),i.BancaDebitore(t.BancaDebitore),i.AbiDebitore(t.AbiDebitore),i.BancaCreditore(t.BancaCreditore),i.AbiCreditore(t.AbiCreditore),i.TitolareAcc(t.TitolareAcc),i.ContoCreditore(t.ContoCreditore),i.CreditoreEff(t.CreditoreEff),i.MetodoPagamento(t.MetodoPagamento),i.Beneficiario(t.Beneficiario))}return t}();t.EsitoAlBeneficiarioBo=i})(n.Sct||(n.Sct={}));var t=n.Sct}(App||(App={})),function(n){(function(t){var i=function(){function t(t){typeof t=="undefined"&&(t=null);var i=this;i.IdentifierEsitoBeneficiario=new n.Common.IdentifierBo(null);i.IdAziende=ko.observableArray(null);i.ImportoTo=ko.observable(null);i.ImportoFrom=ko.observable(null);i.DataCaricamentoFrom=ko.observable(null);i.DataCaricamentoTo=ko.observable(null);i.DataEsecuzioneFrom=ko.observable(null);i.DataEsecuzioneTo=ko.observable(null);i.CodiceAbi=ko.observable(null);i.RagioneSociale=ko.observable(null);n.Core.BasePagingFilterAsync.call(this,t);t!==null&&(i.IdAziende(t.IdAzienda),i.ImportoTo(t.ImportoTo),i.ImportoFrom(t.ImportoFrom),i.RagioneSociale(t.RagioneSociale),t.DataCaricamentoFrom!==null&&typeof t.DataCaricamentoFrom!="undefined"&&i.DataCaricamentoFrom(new Date(moment(t.DataCaricamentoFrom))),t.DataCaricamentoTo!==null&&typeof t.DataCaricamentoTo!="undefined"&&i.DataCaricamentoTo(new Date(moment(t.DataCaricamentoTo))),t.DataEsecuzioneFrom!==null&&typeof t.DataEsecuzioneFrom!="undefined"&&i.DataEsecuzioneFrom(new Date(moment(t.DataEsecuzioneFrom))),t.DataEsecuzioneTo!==null&&typeof t.DataEsecuzioneTo!="undefined"&&i.DataEsecuzioneTo(new Date(moment(t.DataEsecuzioneTo))),i.CodiceAbi(t.CodiceAbi),t.ClassiServizio!=null&&ko.utils.arrayForEach(t.ClassiServizio,function(n){i.ClassiServizio.push(n)}),i.IdentifierEsitoBeneficiario=new n.Common.IdentifierBo(t))}return t}();t.FilterEsitoBeneficiario=i})(n.Sct||(n.Sct={}));var t=n.Sct}(App||(App={})),function(n){(function(n){var t=function(){function n(n){typeof n=="undefined"&&(n=null);this.Codice=ko.observable(null);this.DescrizioneLibera=ko.observable(null);var t=this;n!==null&&(t.Codice(n.Codice),t.DescrizioneLibera(n.DescrizioneLibera))}return n}();n.FinalitaPagamentoBo=t})(n.Sct||(n.Sct={}));var t=n.Sct}(App||(App={})),function(n){(function(n){var t=function(){function n(n){typeof n=="undefined"&&(n=null);this.Codice=ko.observable(null);this.DescrizioneLibera=ko.observable(null);var t=this;n!==null&&(t.Codice(n.Codice),t.DescrizioneLibera(n.DescrizioneLibera))}return n}();n.TipoContoBo=t})(n.Sct||(n.Sct={}));var t=n.Sct}(App||(App={})),function(n){(function(n){var t=function(){function n(n){typeof n=="undefined"&&(n=null);this.Ammount=ko.observable(null);this.AmmountCurrency=ko.observable(null);this.Charge=ko.observable(null);this.ChargeCurrency=ko.observable(null);var t=this;n!==null&&(t.Ammount(n.Ammount),t.AmmountCurrency(n.AmmountCurrency),t.Charge(n.Charge),t.ChargeCurrency(n.ChargeCurrency))}return n}();n.CommissionBo=t})(n.Sct||(n.Sct={}));var t=n.Sct}(App||(App={}));