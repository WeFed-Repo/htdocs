function registerValidationRule(n,t,i){$(n).unbind(t);ko.utils.registerEventHandler(n,t,i);koRootViewModel.addValidationRule(n,i)}function parseNumber(n){return n!=null&&(n=n.toString().replace(",",".")),parseFloat(n)}function onlyRealNumbersChars(n){var t;return(window.event||!n.which?t=n.keyCode:n&&(t=n.which),t==8||t==9)?!0:(t<48||t>57)&&t!=44&&t!=45?!1:!0}function onlyDateChars(n){var t;return(window.event||!n.which?t=n.keyCode:n&&(t=n.which),t==8||t==9)?!0:t<47||t>57?!1:!0}ko.bindingHandlers.singleClick={init:function(n,t){$(n).unbind("click");$(n).bind("click",t())}};ko.bindingHandlers.numeric={init:function(n,t){registerValidationRule(n,"change",function(){var i=$(n).val(),r=parseNumber(i),u=t();isNaN(r)?i==""?u(i):validationHandler.notifyError(n,NumericValidationError):(u(r),$(n).val(r))});ko.utils.registerEventHandler(n,"keypress",function(n){var t=onlyRealNumbersChars(n);t||n.preventDefault()})},update:function(n,t){var i=ko.utils.unwrapObservable(t()),r=parseNumber(i);isNaN(r)?i==""&&$(n).val(i):$(n).val(r.toString().replace(".",","))}};ko.bindingHandlers.numericrange={init:function(n,t,i){var r=i().minValue||1,f=i().maxValue||100,u=i().fallbackValue||r;registerValidationRule(n,"change",function(){var e=$(n).val(),i=parseNumber(e),o=t();!isNaN(i)&&i>=r&&i<=f?(o(i),$(n).val(i)):e==""?o(e):(o(u),$(n).val(u))});ko.utils.registerEventHandler(n,"keypress",function(n){var t=onlyRealNumbersChars(n);t||n.preventDefault()})},update:function(n,t,i){var f=i().minValue||1,e=i().maxValue||100,u=ko.utils.unwrapObservable(t()),r=parseNumber(u);!isNaN(r)&&r>=f&&r<=e?$(n).val(r.toString().replace(".",",")):u==""&&$(n).val(u)}};ko.bindingHandlers.datetime={init:function(n,t){registerValidationRule(n,"change",function(){var r=$(n).val(),i=moment(r,["DD/MM/YYYY","DD/MM/YYYY","YYYY/MM/DDTHH:mm:ss"]),f=t(),u;i!=null&&i.isValid()?(i.year()<100&&i.add("y",2e3),u="",r!=""&&(u=i.format("DD/MM/YYYY")),f(u),$(n).val(u)):r!=""||f(r)});ko.utils.registerEventHandler(n,"keypress",function(n){var t=onlyDateChars(n);t||n.preventDefault()})},update:function(n,t){var i=ko.utils.unwrapObservable(t()),r=moment(i,["DD/MM/YYYY","YYYY/MM/DDTHH:mm:ss"]),u;r!=null&&r.isValid()?(u=r.format("DD/MM/YYYY"),$(n).val(u)):i==""&&$(n).val(i)}};ko.bindingHandlers.date={init:function(n,t){registerValidationRule(n,"change",function(){var r=$(n).val(),f=t(),i=moment(r,["DD/MM/YYYY"]),u;i!=null&&i.isValid()?(i.year()<100&&i.add("y",2e3),u="",r!=""&&(u=i.format("DD/MM/YYYY")),f(u),$(n).val(u)):r!=""||f(r)});ko.utils.registerEventHandler(n,"keypress",function(n){var t=onlyDateChars(n);t||n.preventDefault()})},update:function(n,t){var i=ko.utils.unwrapObservable(t()),r=moment(i,["DD/MM/YYYY"]),u;r!=null&&r.isValid()?(u=r.format("DD/MM/YYYY"),$(n).val(u)):i==""&&$(n).val(i)}};ko.bindingHandlers.dictionary={init:function(n,t,i){var r=function(){var r=i().id,e=i().originalValue,f=n.value,u=t();u[r]==undefined&&(u[r]=ko.observable());f!=e?u[r](f):u[r]=undefined};ko.utils.registerEventHandler(n,"change",r)}};ko.bindingHandlers["class"]={init:function(){},update:function(n,t){var i=ko.utils.unwrapObservable(t()),u=n.__ko__previousClassValue__,r=function(t,i){Object.prototype.toString.call(t)==="[object Array]"?ko.utils.arrayForEach(t,function(t){var r=ko.utils.unwrapObservable(t);ko.utils.toggleDomNodeCssClass(n,r,i)}):t&&ko.utils.toggleDomNodeCssClass(n,t,i)};r(u,!1);r(i,!0);n.__ko__previousClassValue__=i?i.concat():""}};ko.bindingHandlers.fadeVisible={init:function(n,t){var i=t();$(n).toggle(ko.unwrap(i))},update:function(n,t){var i=t();ko.unwrap(i)?$(n).fadeIn():$(n).fadeOut()}};
//# sourceMappingURL=tm.knockout.min.js.map
