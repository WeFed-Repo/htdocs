(function(n){n.widget("tm.webcommunication",n.ui.dialog,{_original_init:n.ui.dialog.prototype._init,_original_create:n.ui.dialog.prototype._create,_original_close:n.ui.dialog.prototype.close,_original_open:n.ui.dialog.prototype.open,options:{height:"auto",delay:2e3,maxHeight:300,showDelay:0,maxWidth:!0,resizable:!1,connect:{url:null,type:"POST",successHandler:n.noop,errorHandler:n.noop}},_loading:!1,_create:function(){this._original_create.apply(this,arguments)},_init:function(){this._original_init.apply(this,arguments)},_createAjaxSettings:function(t,i){var r={};return n.extend(r,t),n.extend(r,i),r.beforeSend=null,r.complete=null,r.error=null,r.success=null,r.popup&&(r.headers={PopupDisplay:"true"}),r},_evaluateSuccessCallBack:function(t,i){return i&&i.successHandler?i.successHandler:t&&t.successHandler?t.successHandler:n.noop},_evaluateErrorCallBack:function(t,i){return i&&i.errorHandler?i.errorHandler:t&&t.errorHandler?t.errorHandler:n.noop},_getErrorResponse:function(t){var i=t.getResponseHeader("X-Vantaggio-Error");if(i!=undefined)try{return n.parseJSON(i)}catch(r){}return null},_getJsonResponse:function(t){try{var i=t.getResponseHeader("content-type")||"";if(i.indexOf("application/json")>-1)return n.parseJSON(t.responseText)}catch(r){}return null},_loadingId:null,_loadingInternal:function(n){n=n!==undefined&&n==!0;n&&!this._loading?(this._original_open.apply(this,arguments),this._loading=!0):(this._loading=!1,this._original_close.apply(this,arguments))},loading:function(n,t){if(Logger.debugMessage("start loading"),n!=!0||t==undefined||isNaN(t))this._loadingId=null;else{var i=this,r="fadeId="+(new Date).getTime();Logger.debugMessage("Current fadeId: "+r);i._loadingId=r;i.element.fadeTo(t,0,function(){i._fadingEnd(i,r)})}return this._loadingInternal(n)},_fadingEnd:function(n,t){n!=null&&t==n._loadingId&&(Logger.debugMessage("_fadingEnd. _loadingId"+n._loadingId),n.element.fadeTo(0,1,function(){Logger.debugMessage("Animation complete. LoadingBox should be visible.")}))},close:function(n){this.loading(!1,n)},open:function(n){this.loading(!0,n)},connectjson:function(t){t!=null&&t.data==undefined&&(t.data=null);var i={data:n.toJSON(t.data),contentType:"application/json; charset=utf-8",dataType:"json",converters:{"text json":!0}};this.connect(n.extend(n.extend({},t),i))},connect:function(t){var i=this,u=i.options.connect,f=i._evaluateSuccessCallBack(u,t),r=i._evaluateErrorCallBack(u,t);t=this._createAjaxSettings(u,t);i.loading(!0,i.options.delay);n.ajax(t).success(function(t,u,e){try{var o=i._getJsonResponse(e),c=o!=null,s=i._getErrorResponse(e),h=s!=null;if(i.loading(!1),h){r!=n.noop&&r(h,s,e,t,u,null);return}f!=n.noop&&f(t,c,o)}catch(l){alert(l)}}).error(function(t,u,f){i.loading(!1);r!=n.noop&&r(!1,null,t,null,u,f)})}})})(jQuery);
//# sourceMappingURL=tm.communication.min.js.map
