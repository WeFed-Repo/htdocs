(function(n){n.widget("tm.enginecommunication",{options:{delay:2e3,showDelay:0,connect:{url:null,type:"POST",successHandler:n.noop,errorHandler:n.noop},loadingBehavior:{startLoading:n.noop,stopLoading:n.noop,startFading:n.noop}},_loading:!1,_createAjaxSettings:function(t,i){var r={};return n.extend(r,t),n.extend(r,i),r.beforeSend=null,r.complete=null,r.error=null,r.success=null,r.popup&&(r.headers={PopupDisplay:"true"}),r},_evaluateSuccessCallBack:function(t,i){return i&&i.successHandler?i.successHandler:t&&t.successHandler?t.successHandler:n.noop},_evaluateErrorCallBack:function(t,i){return i&&i.errorHandler?i.errorHandler:t&&t.errorHandler?t.errorHandler:n.noop},_getErrorResponse:function(t){var i=t.getResponseHeader("X-Web-Error");if(i!=undefined)try{return n.parseJSON(i)}catch(r){}return null},_getWarnResponse:function(t){var i=t.getResponseHeader("X-Web-Warn");if(i!=undefined)try{return n.parseJSON(i)}catch(r){}return null},_getJsonResponse:function(t){try{var i=t.getResponseHeader("content-type")||"";if(i.indexOf("application/json")>-1)return n.parseJSON(t.responseText)}catch(r){}return null},_loadingId:null,_loadingInternal:function(n){if(n=n!==undefined&&n==!0,n&&!this._loading)this._loading=!0;else{this._loading=!1;try{this.options.loadingBehavior.stopLoading&&this.options.loadingBehavior.stopLoading(this,arguments)}catch(t){}}},loading:function(n,t){if(n!=!0||t==undefined||isNaN(t))this._loadingId=null;else{var i=this,r="fadeId="+(new Date).getTime();i._loadingId=r;try{setTimeout(function(){i._evaluateShow(i,r)},t);this.options.loadingBehavior.startFading&&this.options.loadingBehavior.startFading(this,arguments)}catch(u){Logger.errorMessage(u)}}return this._loadingInternal(n)},_evaluateShow:function(n,t){if(n!=null&&t==n._loadingId)try{this.options.loadingBehavior.startLoading&&this.options.loadingBehavior.startLoading(this,arguments)}catch(i){}},connectjson:function(t){t!=null&&t.data==undefined&&(t.data=null);var i={data:n.toJSON(t.data),contentType:"application/json; charset=utf-8",dataType:"json",converters:{"text json":!0}};this.connect(n.extend(n.extend({},t),i))},connect:function(t){var i=this,r=i.options.connect,u=i._evaluateSuccessCallBack(r,t),f=i._evaluateErrorCallBack(r,t);t=this._createAjaxSettings(r,t);i.loading(!0,i.options.delay);n.ajax(t).success(function(t,r,f){try{var e=i._getJsonResponse(f),o=i._getWarnResponse(f);i.loading(!1);u!=n.noop&&u(i,t,e,o)}catch(s){Logger.errorException("Error in comunication engine (success)",s)}}).error(function(t,r,u){try{i.loading(!1);var e=i._getErrorResponse(t);f!=n.noop&&f(i,t,r,u,e)}catch(o){Logger.errorException("Error in comunication engine (error)",o)}})}})})(jQuery);
//# sourceMappingURL=tm.communication.engine.min.js.map
