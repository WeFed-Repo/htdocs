<script>
		$(document).ready(function(){simRendiOpen();simBuoniOpen()})
		function checkIntero(campo){var stringaPassa="0123456789";var valoreSplit=parseInt(campo.value.replace(/\./g,"")).toString().split("");var valoreFiltrato="";for(x=0;x<valoreSplit.length;x++){if(stringaPassa.indexOf(valoreSplit[x])>=0){valoreFiltrato=valoreFiltrato+valoreSplit[x]}}campo.value=applicaSeparatore(valoreFiltrato)}
		function checkPlusMin(fieldVal,simVal){pmButtonM=pmM;pmButtonP=pmP;fvalue=(fieldVal=="")?0:parseInt(fieldVal);if(fvalue<=0){pmButtonM[0].className="minus disabled";pmButtonP[0].className="plus"}else{if(fvalue>=1000000){pmButtonP[0].className="plus disabled";pmButtonM[0].className="minus"}else{pmButtonP[0].className="plus";pmButtonM[0].className="minus"}}}
		function checkPlusMinBuoni(fieldVal,simVal){pmButtonM=pmMb;pmButtonP=pmPb;fvalue=(fieldVal=="")?10000:parseInt(fieldVal);if(fvalue<=10000){pmButtonM[0].className="minus disabled";pmButtonP[0].className="plus"}else{pmButtonP[0].className="plus";pmButtonM[0].className="minus"}}
		function checkLimit(campo){var fvalue=campo.value.replace(/\./g,"");if(fvalue>=1000000){campo.value=applicaSeparatore(1000000);pmP[0].className="plus disabled";pmM[0].className="minus"}else if(fvalue==0){pmP[0].className="plus";pmM[0].className="minus disabled"}else{pmP[0].className="plus";pmM[0].className="minus"}}
		function checkLimitBuoni(campo){var fvalue=campo.value.replace(/\./g,"");if(fvalue<=10000){pmPb[0].className="plus";pmMb[0].className="minus disabled"}else{pmPb[0].className="plus";pmMb[0].className="minus"}}
		function plusMinInv(pulsante,event){simVal = simRendiVal;simVal.val(simVal.val().replace(/\./g, ""));if(simVal.val() == "") {simVal.val(0)}fvalue = parseInt(simVal.val());var inserito = fvalue/1000;var incdec =1000;var incdecM = 1;if (pulsante.className == "plus" || pulsante.className == "plus disabled"){var soglia = parseInt(inserito) + incdecM;var fvalue = soglia*incdec; if (fvalue>1000000) {fvalue = 1000000};}else{var separatore = inserito.toString().indexOf('.');if(separatore !=-1) {var soglia = parseInt(inserito)}else{var soglia = parseInt(inserito)-incdecM}fvalue = soglia*incdec;if (fvalue<0) {fvalue=0}}fvalueOutput = applicaSeparatore(fvalue);simVal.val(fvalueOutput);checkPlusMin(fvalue,simVal);simRendiCalcola()}
		function plusMinBuoni(pulsante,event){simVal=simBuoniVal;simVal.val(simVal.val().replace(/\./g,""));if(simVal.val()=="")simVal.val(0);fvalue=parseInt(simVal.val());var inserito=fvalue/1000;var incdec=50000;var incdecM=50;if(pulsante.className=="plus"||pulsante.className=="plus disabled"){var soglia=parseInt(inserito)+incdecM;var fvalue=parseInt(soglia/50)*incdec}else{var soglia=(parseInt(inserito)-incdecM)/50;var separatore=(inserito/50).toString().indexOf('.');if(separatore!=-1){var fvalue=parseInt(soglia+1)*incdec}else{var fvalue=parseInt(soglia)*incdec}if(fvalue<10000)fvalue=10000}fvalueOutput=applicaSeparatore(fvalue);simVal.val(fvalueOutput);checkPlusMinBuoni(fvalue,simVal,event);simBuoniCalcola()}
		function formattaVirgola(valore){var formattaVirgola="";if(valore>0){formattaVirgola=(Math.round(valore*100)).toString();if(formattaVirgola.length<2)formattaVirgola="0"+formattaVirgola;var formattaValDec=formattaVirgola.substring(formattaVirgola.length-2,formattaVirgola.length);var formattaValInt=formattaVirgola.substring(0,formattaVirgola.length-2);if(formattaValInt=="")formattaValInt="0";formattaVirgola=formattaValInt+","+formattaValDec}else{formattaVirgola="0"}return formattaVirgola}
		function formattaEuro(valore){var cifraTesto=applicaSeparatore(valore);return cifraTesto+" &euro;"}
		function applicaSeparatore(valore){var cifraTesto=Math.round(valore).toString();var cifraArray=cifraTesto.split("");cifraTesto="";for(x=0;x<cifraArray.length;x++){if(x%3!=0||x==0){cifraTesto=cifraArray[cifraArray.length-x-1]+cifraTesto}else{cifraTesto=cifraArray[cifraArray.length-x-1]+"."+cifraTesto}}return cifraTesto}  
		var interLin = 20;var interLin3 = 3;var interLin6 = 3;var interLin12 = 3;
		function simRendiCalcolaResult(valore,interesse,periodo){var valoreCalcolato=((valore/100)*interesse*((100-interLin)/100))*(periodo/12);if(valoreCalcolato<1){aggValore=formattaVirgola(valoreCalcolato)+" &euro;"}else{aggValore=formattaEuro(parseInt(valoreCalcolato))}return aggValore}
		function simRendiCalcola(){simRendiValClean=simRendiVal.val().replace(/\./g,"");var classToChange="";if(simRendiValClean!=""){var valore=parseInt(simRendiValClean);simRendiNetto12[0].innerHTML=simRendiCalcolaResult(valore,interLin3,12);classToChange=" active"}for(x=0;x<simRendiBoxes.length;x++){simRendiBoxes[x].className="invbox"+classToChange}}
		function simRendiOpen(){simRendiVal=$("#simRendiValore");simRendiNetto12=$("#rendiNetto12");pmM=$("#plusminmin");pmP=$("#plusminplus");simRendiBoxes=$("#simRendimento .invbox");simRendiVal.focus();simRendiVal.val(applicaSeparatore(simRendiVal.val().replace(/\./g,"")))}
		function simBuoniOpen(){simBuoniVal=$("#simBuoni");pmMb=$("#plusminminBuoni");pmPb=$("#plusminplusBuoni");simBuoniBoxes=$("#rendiBuoni");simBuoniVal.focus();simBuoniVal.val(applicaSeparatore(simBuoniVal.val().replace(/\./g,"")))}
		function simBuoniCalcola(){simBuoniValClean=simBuoniVal.val().replace(/\./g,"");var classToChange="";if(simBuoniValClean!=""){var valore=parseInt(simBuoniValClean);if(valore<10000){valoreBuoni=0}else if(valore>=10000&&valore<=50000){valoreBuoni=30}else if(valore>50000&&valore<=100000){valoreBuoni=150}else if(valore>100000&&valore<=250000){valoreBuoni=300}else if(valore>250000&&valore<=500000){valoreBuoni=750}else if(valore>500000&&valore<=750000){valoreBuoni=applicaSeparatore(1000)}else if(valore>750000&&valore<=1000000){valoreBuoni=applicaSeparatore(2500)}else if(valore>1000000){valoreBuoni=applicaSeparatore(3000)}simBuoniBoxes.html(valoreBuoni+' &euro;');classToChange=" active"}}
		</script>