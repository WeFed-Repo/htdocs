//fissa la larghezza del menu per renderlo elastico anche su browser vecchia generazionefunction fixWidth() 	{	if(document.getElementById('menu')) 	{	var menu = document.getElementById('menu');	var uls = menu.getElementsByTagName('ul');	for (i=0; i<uls.length; i++ )	{		uls[i].style.width = menu.offsetWidth + 'px';	}	}	}//posiziona i contenuti calcolando l'altezza del sottomenufunction calcolaMTop()	{if(document.getElementById('menu')) 	{	document.getElementById('menu').getElementsByTagName('li')[0].style.marginLeft = 35 + 'px';	if (navigator.userAgent.indexOf("MSIE 6.0") > 0 ){	document.getElementById('menu').getElementsByTagName('li')[0].style.marginLeft = 20 + 'px';	}	var sottomenu = document.getElementById('menu').getElementsByTagName('ul');	for(i=0; i<sottomenu.length; i++) 	{	if (sottomenu[i].getElementsByTagName('li')[0]) {sottomenu[i].getElementsByTagName('li')[0].style.paddingLeft = 48 + 'px'}	if (sottomenu[i].style.display=='block') {		document.getElementById('menu').style.marginBottom =  sottomenu[i].offsetHeight + 'px';	}	}		}	}		//selzione menu di primo livello function selected(obj){ var lilist = document.getElementById('menu');var alist = lilist.getElementsByTagName('a');for (i=0; i<alist.length; i++ )	{		if (alist[i].parentNode.className.indexOf('vociFirstlevel')>-1) 		{		alist[i].className='';		alist[i].parentNode.getElementsByTagName('ul')[0].setAttribute('id', '');		alist[i].parentNode.getElementsByTagName('ul')[0].style.display="none";		alist[i].parentNode.className='vociFirstlevel';		}				else 		{		alist[i].parentNode.className='vociSecondlevel';		alist[i].className='';		var imgSelcted = alist[i].parentNode.getElementsByTagName('img');			for(j= 0; j<imgSelcted.length; j++) 			{				imgSelcted[j].style.visibility = 'hidden';			}		}				}	obj.className='active';	obj.parentNode.getElementsByTagName('ul')[0].setAttribute('id', 'secondUl');	obj.parentNode.getElementsByTagName('ul')[0].style.display="block";	if(document.getElementById('secondUl').getElementsByTagName('li')[0]) {	document.getElementById('secondUl').getElementsByTagName('a')[0].className = 'selected';	document.getElementById('secondUl').getElementsByTagName('li')[0].className = 'vociSecondlevel' + ' ' + 'sel';	document.getElementById('secondUl').getElementsByTagName('a')[0].parentNode.getElementsByTagName('img')[0].style.visibility ='visible';	document.getElementById('secondUl').getElementsByTagName('a')[0].parentNode.getElementsByTagName('img')[1].style.visibility ='visible'}	obj.parentNode.className='vociFirstlevel' + ' ' + 'on';			calcolaMTop();	}//selzione menu di secondo livello function selectedSecond(obj) //menu secondo livello	{	var lilist = document.getElementById('menu');	var alist = lilist.getElementsByTagName('a');	for (i=0; i<alist.length; i++ )	{		if (alist[i].parentNode.className.indexOf('vociSecondlevel')>-1) 		{		alist[i].className='';		alist[i].parentNode.className='vociSecondlevel';		var imgSelcted = alist[i].parentNode.getElementsByTagName('img');			for(j= 0; j<imgSelcted.length; j++) 			{				imgSelcted[j].style.visibility = 'hidden';			}				}	}			obj.className='selected';		obj.parentNode.className = 'vociSecondlevel' + ' ' + 'sel';		obj.parentNode.parentNode.parentNode.className = 'vociFirstlevel' + ' ' + 'on';		var imgSelcted = obj.parentNode.getElementsByTagName('img');		for(i= 0; i<imgSelcted.length; i++) 		{			imgSelcted[i].style.visibility = 'visible';		}	}		/*function switchDetail(aBtn) 		{			dettagli = aBtn.parentNode.parentNode.nextSibling;			if (dettagli.className == undefined)				{					do  (dettagli = dettagli.nextSibling)					while (dettagli.className == undefined);				}												if (aBtn.className == "espansione")			{				aBtn.className = "espansione aperto";				dettagli.className = "dettaglioespandibile aperto";			}			else			{				aBtn.className = "espansione";				dettagli.className = "dettaglioespandibile";			}		}*//* TABELLA AD ESPANSIONE */function switchDetail (button){	var rigaorigine = button.parentNode.parentNode;	var tuttelerighe = rigaorigine.parentNode.getElementsByTagName("TR");	//gestione righe aperte	if (rigaorigine.className.indexOf('espandibile')!=-1){classasis = "dettaglioespandibile";classtobe = "dettaglioespandibile aperto";}	else if(rigaorigine.className.indexOf('espandibile')==-1){classasis = "dettaglioespandibile aperto";classtobe = "dettaglioespandibile";}		//riga di partenza grigia	if (rigaorigine.className=='espandibile grigio'){rigaorigine.className='grigio green'}//apre	else if (rigaorigine.className=='grigio green'){rigaorigine.className='espandibile grigio'}//chiude		//riga di partenza oro	else if (rigaorigine.className=='espandibile oro'){rigaorigine.className='green oro'}//apre	else if (rigaorigine.className=='green oro'){rigaorigine.className='espandibile oro'}//chiude		//riga di partenza oro scuro	else if (rigaorigine.className=='espandibile oro2'){rigaorigine.className='oro2 green'}//apre	else if (rigaorigine.className=='oro2 green'){rigaorigine.className='espandibile oro2'}//chiude	//riga di partenza bianca	else if (rigaorigine.className=='green'){rigaorigine.className='espandibile'}//chiude	else{rigaorigine.className = 'green'}//apre					for (i=0;i<tuttelerighe.length;i++)		{			if (tuttelerighe[i] == rigaorigine)			{								if (tuttelerighe[i+1])				{					x = i + 1;										stop = true;					do					{						if (tuttelerighe[x].className == classasis) tuttelerighe[x].className = classtobe;												x++;						if (tuttelerighe[x])						{							if (tuttelerighe[x].className != classasis) stop = false;						}						else						{							stop = false;						}					} while (stop);				}			}					}					}		//oscura tuttofunction obscurateAll (opacitylevel){	//controlla che tutto non sia gi? oscurato da qualcosa	if (!document.getElementById('layerpop'))	{		var layerpop = document.createElement('DIV');		layerpop.id='layerpop';		document.body.appendChild(layerpop);		if (document.getElementById('overlayerLight')) 			{ 				document.getElementById('layerpop').className = "overlayerchiaro"; 			}						//document.body.appendChild(layerpop);		//imposta l'oscuratore layerpop al massimo dei livelli		document.getElementById('layerpop').style.zIndex = getNextHighestZindex();		//imposta l'altezza di layerpop a tutto schermo e appende le funzioni di scrolling e resizing all'oscuratore		if(navigator.appName != "Microsoft Internet Explorer")		{ 			document.getElementById('layerpop').style.height = window.height + 'px'; 			document.getElementById('layerpop').style.marginTop = getScrollY() + 'px';		} 		else 		{ 			document.getElementById('layerpop').style.height = getPageHeight() + 'px';  			document.getElementById('layerpop').style.marginTop = getScrollY() + 'px';		} 				obscuratescroll = new Function ('document.getElementById(\'layerpop\').style.marginTop = getScrollY() + \'px\';');		obscurateresize = new Function ('document.getElementById(\'layerpop\').style.height = getPageHeight() + \'px\';');				if (window.attachEvent)		{			window.attachEvent("onresize", obscurateresize);			window.attachEvent("onscroll", obscuratescroll);		}		else		{			window.addEventListener("scroll",obscuratescroll, false);			window.addEventListener("DOMMouseScroll", obscuratescroll, false);			window.addEventListener("resize", obscurateresize, false);		}						if (opacitylevel)		{			layerpop.style.opacity = opacitylevel/10;			layerpop.style.filter = 'alpha(opacity=' + opacitylevel * 10 + ')';		}	}}function unobscurateAll (){	if (window.attachEvent)	{		window.detachEvent("onresize", obscurateresize);		window.detachEvent("onscroll", obscuratescroll);	}	else	{		window.removeEventListener("scroll", obscuratescroll, false);		window.removeEventListener("DOMMouseScroll", obscuratescroll, false);		window.removeEventListener("resize", obscurateresize, false);	}		document.body.removeChild(document.getElementById('layerpop')); }//funzione che rende invisibili le tendine tranne quelle contenute nel div che risulta essere attivo (e nei suoi figli)function arrangeSelect (idElement){	if (idElement)	{		var x = document.getElementsByTagName("select").length;			x = document.getElementsByTagName("select");		for (i = x.length; i; x[--i].style.visibility = 'hidden');		var y = document.getElementById(idElement).getElementsByTagName('select');		for (i = y.length; i; x[--i].style.visibility = 'visible');	}	else	{		x = document.getElementsByTagName("select");		for (i = x.length; i; x[--i].style.visibility='visible');	}}// --------- Framework per overlayer e alert ------------//// Rileva il massimo z-index in tutto il documento correntefunction getNextHighestZindex(){	var highestIndex = 0;	var currentIndex = 0;	var elArray = Array();	if (navigator.userAgent.indexOf("MSIE 5.5") > -1)	{		elArray = document.all;	}	else	{		elArray = document.getElementsByTagName('*');	}	for(var i=0; i < elArray.length; i++){		if(window.getComputedStyle){			currentIndex = parseFloat(document.defaultView.getComputedStyle(elArray[i],null).getPropertyValue('z-index'));			if(!isNaN(currentIndex) && currentIndex >= highestIndex){highestIndex = currentIndex;}		}		if (elArray[i].currentStyle){			//stile dell'elemento			currentIndex = parseFloat(elArray[i].currentStyle['zIndex']);			if(!isNaN(currentIndex) && currentIndex >= highestIndex){highestIndex = currentIndex;}		}		if (elArray[i].style.zIndex){			//stile dell'elemento			currentIndex = parseFloat(elArray[i].style.zIndex);			if(!isNaN(currentIndex) && currentIndex >= highestIndex){highestIndex = currentIndex;}		}	}	return(highestIndex+1);}//identifica la meta' orizzontale della paginafunction getPageWidth (){	if (navigator.appName != "Microsoft Internet Explorer")	{		return document.body.clientWidth;	} 	else 	{		if(navigator.userAgent.indexOf("MSIE 5.5") > -1)		{			return document.body.offsetWidth;		}		else		{			return document.documentElement.clientWidth;		}	}}function getPageHeight (){	if (navigator.appName != "Microsoft Internet Explorer")	{		return window.innerHeight;	} 	else 	{		if (navigator.userAgent.indexOf("MSIE 5.5") > -1)		{			return document.body.offsetHeight;		}		else		{			return document.documentElement.clientHeight;		}	}}//scrolling amountfunction getScrollY() {	if(navigator.appName != "Microsoft Internet Explorer"){		return window.pageYOffset;	}	else	{		if (navigator.userAgent.indexOf("MSIE 5.5") > -1)		{			return document.body.scrollTop;		}		else		{			return document.documentElement.scrollTop;		}	}}		//funzione che apre un popup con overlayer//mode = 'fixed' overlayer con margin-top fisso da css//mode = 'floating' overlayer sempre centrato nella paginafunction openPopOverLayer (idElement, mode, opacitylevel){	if (opacitylevel) {obscurateAll(opacitylevel)}	else {obscurateAll()}		document.body.insertBefore(document.getElementById(idElement), document.body.getElementsByTagName('div')[0]);	document.getElementById(idElement).style.display = 'block';		//allocazione funzioni scrolling e resizing	popfixedalertresize = new Function ('document.getElementById(\''+ idElement + '\').style.marginLeft = Math.round((getPageWidth() - document.getElementById(\''+ idElement + '\').offsetWidth)/2) + \'px\';');	popalertscroll = new Function ('document.getElementById(\''+ idElement + '\').style.marginTop = getScrollY() +  \'px\';' );	popalertresize = new Function ('document.getElementById(\''+ idElement + '\').style.marginLeft = Math.round((getPageWidth() - document.getElementById(\''+ idElement + '\').offsetWidth)/2) + \'px\';document.getElementById(\''+ idElement + '\').style.marginTop = getScrollY() + \'px\';');		//controlla se deve fissare la X o renderla dinamica	if (mode == 'fixed')	{		document.getElementById(idElement).style.marginLeft = Math.round((getPageWidth() - document.getElementById(idElement).offsetWidth)/2) + 'px';		//riallinea l'oggetto orizzontalmente sul resize		if (window.attachEvent)		{			window.attachEvent("onresize", popfixedalertresize);		}		else		{			window.addEventListener("resize", popfixedalertresize, false);		}	}	else	{		if(document.getElementById(idElement).offsetHeight < getPageHeight ())		{			document.getElementById(idElement).style.marginLeft = Math.round((getPageWidth() - document.getElementById(idElement).offsetWidth)/2) + 'px';			document.getElementById(idElement).style.marginTop = getScrollY() + /*Math.round((getPageHeight() - document.getElementById(idElement).offsetHeight)/2) +*/ 'px';			//riallinea l'oggetto sia verticalmente che orizzontalmente			if (window.attachEvent)			{				window.attachEvent("onscroll", popalertscroll);				window.attachEvent("onresize", popalertresize);			}			else			{				window.addEventListener("scroll", popalertscroll, false);				window.addEventListener("resize", popalertresize , false);			}		}		else		{			document.getElementById(idElement).style.marginLeft = Math.round((getPageWidth() - document.getElementById(idElement).offsetWidth)/2) + 'px';			if (getScrollY() + getPageHeight() - document.getElementById(idElement).offsetHeight < 0)			{				document.getElementById(idElement).style.marginTop = '0px';							}			else			{				document.getElementById(idElement).style.marginTop = getScrollY() + getPageHeight() - /*document.getElementById(idElement).offsetHeight*/  + 'px';			}		}	}	arrangeSelect(idElement);	document.getElementById(idElement).style.zIndex = getNextHighestZindex();}//chiude l'overlayer + l'oscuratorefunction closePopOverLayer (idElement){	if (window.attachEvent)		{			if (popfixedalertresize) window.detachEvent("onresize", popfixedalertresize);			if (popalertscroll) window.detachEvent("onscroll", popalertscroll);			if (popalertresize) window.detachEvent("onresize", popalertresize);		}		else		{			if (popfixedalertresize) window.removeEventListener("resize", popfixedalertresize, false);			if (popalertscroll) window.removeEventListener("scroll", popalertscroll, false);			if (popalertresize) window.removeEventListener("resize", popalertresize , false);		}	document.getElementById(idElement).style.display = 'none';	arrangeSelect();	unobscurateAll();}		function windimension(){ //cerca l'altezza della finestra a seconda del browser	if(typeof(window.innerHeight) == 'number') {var winH = window.innerHeight; } // most browsers	else if(document.documentElement && document.documentElement.clientHeight) {var winH = document.documentElement.clientHeight} //IE 6+ in 'standards compliant mode'	else if(document.body && document.body.clientHeight) { var winH = document.body.clientHeight;}//IE 4 compatible		if(document.getElementById('loginform')) {	var logH = document.getElementById('loginform').offsetHeight;	var heaH = document.getElementById('header').offsetHeight;	var fooH = document.getElementById('footer').offsetHeight;		var contH = winH - heaH - fooH;	var space =  contH - logH;	var paddTop = space/2;	if(contH>0){	document.getElementById('login').style.minHeight = contH + 'px';	}	if(contH>0 && space>0){	document.getElementById('login').style.height = contH + 'px';		document.getElementById('boxlogin').style.paddingTop = paddTop + 'px';	}			} 	if(document.getElementById('content')) {	var wrpH = document.getElementById('contenuti').offsetHeight;		var heaH = document.getElementById('header').offsetHeight;	var fooH = document.getElementById('footer').offsetHeight;	var contH = winH - heaH - fooH - document.getElementById('menu').offsetHeight - document.getElementById('menu').getElementsByTagName('ul')[0].offsetHeight;		document.getElementById('contenuti').style.minHeight = contH + 'px';	}	} function doResize(){		var browser_name = navigator.appName;	var browser_version = parseFloat(navigator.appVersion);	if( (browser_name != "Microsoft Internet Explorer") && (navigator.userAgent.indexOf("MSIE 8.0") != -1) )	{location.href=location.href; }	if (navigator.userAgent.indexOf("MSIE 7.0") != -1 || navigator.userAgent.indexOf("MSIE 6.0") != -1 ){	var resizeTimer = 0;	timer = setTimeout("location.href=location.href",1000);	timer2 = setTimeout("clearTimeout(timer)",500);}} 		window.onresize = function() {	fixWidth();	windimension();	if(document.getElementById('loginform')) 	{		doResize();	}	}window.onload = function() {	fixWidth();	windimension();	calcolaMTop();} 