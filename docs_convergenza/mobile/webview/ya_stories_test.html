<!doctype html>

<html lang="en">

<head>

    <meta charset="utf-8">

    <title>YouApp</title>

    <meta name="description" content="YouApp">

    <meta name="viewport" content="width=device-width, viewport-fit=cover, initial-scale=1, shrink-to-fit=no">

    <meta name="apple-mobile-web-app-capable" content="yes">

    <!-- Stili della pagina -->

    <style>
        /* Font face */
        @font-face {
            font-family: 'bankFont';
            src: url('./font/montserrat-light-webfont.woff2') format('woff2'),
                url('./font/montserrat-light-webfont.woff') format('woff');
            font-weight: normal;
            font-style: normal;
        }

        @font-face {
            font-family: 'bankFont';
            src: url('./font/montserrat-lightitalic-webfont.woff2') format('woff2'),
                url('./font/montserrat-lightitalic-webfont.woff') format('woff');
            font-weight: normal;
            font-style: italic;
        }

        @font-face {
            font-family: 'bankFont';
            src: url('./font/montserrat-semibold-webfont.woff2') format('woff2'),
                url('./font/montserrat-semibold-webfont.woff') format('woff');
            font-weight: bold;
            font-style: normal;
        }

        @font-face {
            font-family: 'bankFont';
            src: url('./font/montserrat-semibolditalic-webfont.woff2') format('woff2'),
                url('./font/montserrat-semibolditalic-webfont.woff') format('woff');
            font-weight: bold;
            font-style: italic;
        }

        /*  */
        body {
            background-color: #fff;
            margin: 0;
            padding: 0;
            font-family: 'bankFont', Arial, Serif;
            font-size: 20px;
            height: 100%;
            color: #1f2021;
        }

        .page {
            margin: 0 auto;
            height: 100vh;
            max-width: 640px;
            background: #d9e9f9;
        }

        .page .pagecont {
            /* Il padding verticale permette di scorrere il content senza che resti nascosto dall'area promo
                decidere se ricavarlo in maniera dinamica dall'altezza di tale area*/
            padding: 60px 40px 250px 40px;
        }


        /* Contenuti */
        .boxedcont {
            padding: 15px 15px 5px;
            background: #f4f5f4;
            border-radius: 10px;
            margin: 0 -10px 15px;
        }

        /* Generici */
        a {
            color: #344a86;
            text-decoration: none;
        }

        a:hover {
            text-decoration: underline;
        }

        h1 {
            font-size: 24px;
            line-height: 28px;
            text-transform: uppercase;
            font-weight: bold;
        }


        h2 {
            font-size: 18px;
            line-height: 22px;
            color: #212122;
            margin: 0 0 15px;
        }

        h3 {
            font-size: 16px;
            line-height: 19px;
            color: #344a86;
            margin: 0 0 15px;
        }

        p {
            margin: 0 0 10px;
            clear: both;
            line-height: 27px;
        }

        p.note {
            color: #1f2021;
            font-size: 13px;
            line-height: 18px;
        }

        /* Bullet reset */
        ol,
        ul,
        ol li,
        ul li {
            margin: 0;
            padding: 0;
            list-style-type: none
        }

        /* Bullet rivisti */
        ol {
            counter-reset: ol;
        }

        ol li,
        ul li {
            position: relative;
            padding: 0 0 10px 25px;
            line-height: 20px
        }

        /* Bullet "normali" */
        ul li::before {
            display: block;
            width: 6px;
            height: 6px;
            background-color: #1f2021;
            border-radius: 4px;
            top: 8px;
            left: 4px;
            content: "";
            position: absolute;
        }

        /* Bullet "ordinali" */
        ol li::before {
            display: block;
            width: 18px;
            height: 18px;
            background-color: #344a86;
            font-size: 13px;
            text-align: center;
            line-height: 20px;
            border-radius: 10px;
            top: 0px;
            left: 0;
            counter-increment: ol;
            content: counter(ol);
            position: absolute;
            color: #fff;
        }

        .bottom-promo {
            width: 100%;
            background: url(./img/wood_background.jpg) no-repeat center center;
            background-size: cover;
            position: fixed;
            bottom: 0px;
            max-width: 640px;
        }

        .wrapper-visual {
            max-width: 380px;
            width: 100%;
            margin: 0 auto;
        }

        .wrapper-visual .visual {
            background: url(./img/carte.png) no-repeat center center;
            background-size: contain;
            width: 90%;
            padding-bottom: 70%;
            margin: -100px auto 0px auto;
        }

        .wrapper-cta {
            display: flex;
            width: 100%;
            justify-content: space-around;
            margin-bottom: 20px;
            margin-top: 0px;
            bottom: 0px;
        }

        .wrapper-cta .cta {
            display: inline-block;
            margin: 0px 20px;
            background: #344a86;
            line-height: 15px;
            font-size: 14px;
            text-decoration: none;
            text-align: center;
            font-weight: bold;
            padding: 15px 30px;
            color: #fff;
            border-radius: 8px;
        }

        /* Declinazione dark */

        .dark .contenuto h1 {
            color: #000;
            text-transform: none;
            font-weight: bold;
            margin-bottom: 30px;
        }

        .dark .contenuto p {
            color: #000;
        }

        /* Declinazione amex oro (esempio) */
        .page.amex-oro {
            background-color: #ebce98;
        }


        /* Modo stories dinamico */
        .story-gauge {
            position: fixed;
            z-index:3;
            display: block;
            height: 3px;
            top:40px;
            width: 100%;
            text-align: center;
        }

        .story-gauge .gauge-wrapper {
            position: relative;
            max-width: 640px;
            width:100%;
            margin: 0 auto;
            height: 3px;
            display: flex;
            width: auto;
            flex-direction: row;
            justify-content: space-evenly;
            align-content: center;
            flex-wrap: nowrap;
            align-items: center;
        }

        .story-gauge .gauge {
            width: 100%;
            border-radius: 2px;
            margin: 0 5px;
            text-align: left;
            height: 3px;
            display: block;
            background: rgba(255, 255, 255, 0.3);
        }
        .story-gauge .gauge:first-child {margin-left:10px;}
        .story-gauge .gauge:last-child {margin-right:10px;}

        .story-gauge .gauge .progress {
            width: 0%;
            background: #fff;
            height: 3px;
            display: block;
            border-radius: 2px;
            transition: width 5s;
            transition-timing-function: linear;
        }

        .story-gauge .gauge.done .progress {
            width: 100%;
        }

        /* Transizioni delle pagine */
        .story-wrapper {position:relative;width:100%;max-width:640px;margin:0 auto;}
        .story-wrapper .page { transition:margin 0.5s; margin:0;position:relative;width:100%;z-index:1;}
        .story-wrapper.translating .page { position:absolute;}
        .page.out {margin-left:-100%; position:absolute;z-index:2} 

    </style>
    <script type="text/javascript">

        var pages, story, storyWrapper, gauges, currentindex = 0,oldindex;

        // Funzione autoconsistente di vista pagina
        var cambioVista = function(){
            var gauges = story.getElementsByClassName("gauge");
            // fa partire il countdown per il cambio di pagina
            setTimeout(function(){gauges[currentindex].className ="gauge done"},50);
            var maxindex = story.getElementsByClassName("gauge").length-1;
            var nextindex = currentindex+1;
            if (nextindex>maxindex) nextindex = 0;
 
            
            // Dopo 5 secondi cambia vista e passa alla successiva
            setTimeout(function(){
                // Cambio pagina
                storyWrapper.classList.add("translating");
                pages[currentindex].classList.add("out");
                oldindex = currentindex;
                currentindex = nextindex;
                // Se nextindex = 0, reset di tutte le gauges
                if (nextindex == 0) {
                    story.innerHTML = "";
                    Array.prototype.forEach.call(pages, function(page,index){
                    var gauge = document.createElement("div");
                        gauge.className="gauge";
                        gauge.innerHTML = "<div class='progress'></div>"
                    story.append(gauge);
                    });
                }
                pages[currentindex].style.display= "block";
                setTimeout(function(){
                    var pag = pages[oldindex];
                    pag.style.display= "none"; 
                    pag.classList.remove("out");
                    storyWrapper.classList.remove("translating");
                },500)
                    
                cambioVista();
            },5000);
 
        }

        window.onload = function () {
            // "Conta" le pagine ed inserisce i controlli nella progressbar
           storyWrapper = document.getElementsByClassName('story-wrapper')[0],
           pages =  document.getElementsByClassName('page'),
           story = document.getElementsByClassName('gauge-wrapper')[0],
           
           Array.prototype.forEach.call(pages, function(page,index){
               var gauge = document.createElement("div");
                   gauge.className="gauge";
                   gauge.innerHTML = "<div class='progress'></div>"
               story.append(gauge);
            });

            // Avvia il cycling timeout
           window.setTimeout(cambioVista,100);
            
        }
    </script>
</head>

<body>
    <!-- Barra per stories tipo instagram -->
    <div class="story-gauge"><div class="gauge-wrapper"></div></div>
    <!-- Fine barra per stories tipo instagram -->

    <div class="story-wrapper">

        <!-- Prima pagina -->
            <div class="page dark">
                <div class="contenuto">
                    <div class="pagecont">
                        <h1><strong>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</strong></h1>
                        <p>Nulla ornare rutrum neque, vitae cursus tortor dignissim id. Suspendisse eget feugiat eros. Cras
                            non maximus eros.</p>
                        <p>Nulla ornare rutrum neque, vitae cursus tortor dignissim id. Suspendisse eget feugiat eros. Cras
                            non maximus eros.</p>
                    </div>
                </div>
                <div class="bottom-promo">
                    <div class="wrapper-visual">
                        <div class="visual"></div>
                    </div>
                    <div class="wrapper-cta">
                        <a class="cta" href="#">CTA very long long text</a>
                    </div>
                </div>
            </div>
            <!-- Fine prima pagina -->

            <!-- Seconda pagina -->
            <div class="page dark amex-oro" style="display:none">
                <div class="contenuto">
                    <div class="pagecont">
                        <h1>CARTA ORO AMERICAN EXPRESS</h1>
                        <p>La carta che ti offre <strong>un mondo di vantaggi esclusivi!</strong> Richiedila online entro il
                            30.9.2021 e scopri come <strong>ottenere uno Smart TV in premio!</strong></p>
                    </div>
                </div>
                <div class="bottom-promo">
                    <div class="wrapper-visual">
                        <div class="visual"></div>
                    </div>
                    <div class="wrapper-cta">
                        <a class="cta" href="#">Scopri Carta Oro American Express</a>
                    </div>
                </div>
            </div>
            <!-- Fine seconda pagina -->

    </div>

</body>

</html>